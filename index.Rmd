---
title: "A course on Gadget"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

# Preamble


### Course objectives

This course is an introduction to using Gadget as an ecosystem simulator 
and stock assessment tool. It is introduced using Rgadget, an R library 
that simplifies and standardizes the procedure for creating the input model 
files needed for creating a Gadget model, as well as gather and visualize 
ouput files created by Gadget. Although input files can be created manually,
Rgadget facilitates reproducability and aids internal consistency of Gadget 
model creation by allowing Gadget models to be created, run, analyzed, and 
shared using a single set of R scripts. Please note, however, that both
Gadget and Rgadget are continuously being developed, so please remember to
update your installations frequently (1x / month). In addition, Rgadget is 
programmed using 'tidyverse', so a good understanding of how to program using 
tidyverse is a necessity. 

By the end of this course you should:
* correctly structure and format input files for building a simple Gadget
model and running a simulation via R using Rgadget
* become familiar enough with the various options in Gadget and how to implement
them using the Gadget User Guide that comes with the Gadget installation,
so that a more complex ecosystem can be simulated
* input data, generate likelihood components, and modify optimisation settings 
* understand the iterative reweighting procedure implemented in Rgadget
* become familiar with predefined figures and data frames generated by gadget.fit
and how to personalize them

### Your a priori homework

**Prior to the course** make sure your operating system is a unix derivative, 
such as linux or macosx, as the code and examples in this course is only tested 
against these operating systems. Windows should in theory work, but issues related 
to Windows line endings are known to cause random issues in Gadget. 

To install Gadget follow the [installation guide]. 

Please also have the most recent version of R and Rstudio installed.

In addition, if you plan to run a simple model using your own data, please:

1. familiarize yourself with [tidyverse programming](tidyverse.html)

2. think about your model structure/ aggregation level and have R scripts ready that 
aggregate your data into an appropriately formatted data frame (i.e., columns of :
year, time step, area, age bins, length bins, or age- and length-bins - have a sneak
peak at our example model data [here])

# Time and location
___

__Time__: 2019-09-30 09:00 - 2019-10-04 12:00

__Location__:
```{r, fig.width = 9, fig.height = 3, message = FALSE, echo=FALSE, warning=FALSE}
library(leaflet)
content <- paste(sep = "<br/>",
  "<b><a href='http://www.hafogvatn.is'>Hafro</a></b>",
  "Skúlagata 4",
  "101 Reykjavík, Iceland"
)
leaflet() %>% 
  addTiles() %>% 
  setView(lng = -21.93016, lat = 64.14897, zoom = 15) %>%
   addPopups(-21.93016,64.14897, content,
             options = popupOptions(closeButton = FALSE))
```

# Draft workplan

### Monday - PJW

* Internet access
* [Introduction](introduction.html)
* [Introduction to tidyverse](tidyverse.html)
* Deal with installation issues
* [Getting started](getting_started.html)
* [Adding fleets into the model](day1_continued.html)

---

### Tuesday - PJW
* Recap and examples 
* More complicated models: [Ling in Iceland}(day2_lingmodel.html)
  + Growth
  + Maturation as a multi-'stock' process
  + Initial conditions
  + Recruitment
  + Fleet operations

---

### Wednesday - PJW / BÞE
* Introducing likelihood functions and iterative reweighting
* Incorporating data (Ling case study cont.)
* Set optimisation function parameters and fit Gadget statistical model
* Visualize Gadget statistical model fit
* Own projects

---

### Thursday - BÞE
* Alternate structures - SHOULD THIS MOVE TO THURSDAY MORNING?
  + Spawning
  + Multiple areas
  + Multiple stocks/species
* Stock interactions
  + Migration
  + Straying
  + Consumption
* MFDB
* Version control
* Own projects

---
### Friday - BÞE
* MSE using Gadget: Ling (cont.)
* Wrap up